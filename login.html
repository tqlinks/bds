<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÄÄƒng Nháº­p Quáº£n Trá»‹</title>
    
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script> 
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script> 
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
    
    <style>
        body { font-family: Arial, sans-serif; display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; background-color: #f4f4f9; }
        .login-box { background-color: #fff; padding: 40px; border-radius: 8px; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15); width: 100%; max-width: 400px; text-align: center; }
        h2 { color: #007bff; margin-bottom: 30px; }
        .form-group { margin-bottom: 20px; text-align: left; }
        .form-group label { display: block; margin-bottom: 8px; font-weight: bold; color: #555; }
        .form-group input { width: 100%; padding: 12px; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box; font-size: 16px; }
        button { background-color: #007bff; color: white; padding: 12px 20px; border: none; border-radius: 4px; cursor: pointer; font-size: 18px; width: 100%; transition: background-color 0.3s; }
        button:hover { background-color: #0056b3; }
        #error-message { color: red; margin-top: 15px; font-weight: bold; }
    </style>
</head>
<body>

<div class="login-box">
    <h2>ğŸ”’ ÄÄƒng Nháº­p Quáº£n Trá»‹</h2>
    <form id="login-form">
        <div class="form-group">
            <label for="email">Email</label>
            <input type="email" id="email" required placeholder="admin@example.com">
        </div>
        <div class="form-group">
            <label for="password">Máº­t kháº©u</label>
            <input type="password" id="password" required placeholder="Máº­t kháº©u Admin">
        </div>
        <button type="submit">ÄÄƒng Nháº­p</button>
        <button type="button" onclick="loginWithGoogle()" style="margin-top: 15px; background-color: #db4437;">
    G ÄÄƒng Nháº­p báº±ng Google
</button>
        <p id="error-message"></p>
    </form>
    <p style="margin-top: 20px; font-size: 0.9em; color: #6c757d;">
        NgÆ°á»i dÃ¹ng khÃ´ng Ä‘Äƒng nháº­p (khÃ¡ch) chá»‰ cÃ³ thá»ƒ xem vÃ  tÃ¬m kiáº¿m.
    </p>
</div>

<script>
    // ***************************************************************
    // 1. Cáº¤U HÃŒNH FIREBASE (GIá»® NGUYÃŠN)
    // ***************************************************************
    const firebaseConfig = {
      apiKey: "AIzaSyBBFhxxkIZSguuMV5AZzhLSWa19LYXMOY8",
      authDomain: "bdss-1f754.firebaseapp.com",
      projectId: "bdss-1f754",
      storageBucket: "bdss-1f754.firebasestorage.app",
      messagingSenderId: "1081373432468",
      appId: "1:1081373432468:web:f38cab72330d75de67b281"
    };
    firebase.initializeApp(firebaseConfig);
    
    const auth = firebase.auth();
    const errorMessage = document.getElementById('error-message');

    // ***************************************************************
    // 2. Táº O TÃ€I KHOáº¢N ADMIN Äáº¦U TIÃŠN (CHá»ˆ Cáº¦N THá»°C HIá»†N 1 Láº¦N TRÃŠN CONSOLE)
    // LÆ¯U Ã: THÃ”NG THÆ¯á»œNG Sáº¼ Táº O THá»¦ CÃ”NG TRÃŠN FIREBASE CONSOLE Äá»‚ Báº¢O Máº¬T.
    // Náº¿u báº¡n muá»‘n táº¡o báº±ng code (chá»‰ dÃ¹ng cho láº§n Ä‘áº§u):
    /*
    auth.createUserWithEmailAndPassword("admin@yourdomain.com", "your_strong_password_123")
        .then(() => console.log('Admin user created!'))
        .catch(err => console.error(err));
    */
    // ***************************************************************

    document.getElementById('login-form').addEventListener('submit', function(e) {
        e.preventDefault();
        errorMessage.textContent = '';
        
        const email = document.getElementById('email').value;
        const password = document.getElementById('password').value;

        auth.signInWithEmailAndPassword(email, password)
            .then((userCredential) => {
                // ÄÄƒng nháº­p thÃ nh cÃ´ng, chuyá»ƒn hÆ°á»›ng Ä‘áº¿n trang quáº£n lÃ½
                window.location.href = 'input.html';
            })
            .catch((error) => {
                console.error("Lá»—i ÄÄƒng Nháº­p:", error.code, error.message);
                
                let msg = "ÄÄƒng nháº­p tháº¥t báº¡i. Vui lÃ²ng kiá»ƒm tra email vÃ  máº­t kháº©u.";
                if (error.code === 'auth/user-not-found') {
                    msg = "TÃ i khoáº£n khÃ´ng tá»“n táº¡i.";
                } else if (error.code === 'auth/wrong-password') {
                    msg = "Máº­t kháº©u khÃ´ng Ä‘Ãºng.";
                }
                errorMessage.textContent = msg;
            });
    });
    // ThÃªm Ä‘oáº¡n code nÃ y vÃ o pháº§n <script> trong login.html, cÃ¹ng chá»— vá»›i cÃ¡c hÃ m Firebase Auth khÃ¡c.

const googleProvider = new firebase.auth.GoogleAuthProvider();

function loginWithGoogle() {
    // áº¨n thÃ´ng bÃ¡o lá»—i trÆ°á»›c khi Ä‘Äƒng nháº­p
    errorMessage.textContent = ''; 

    auth.signInWithPopup(googleProvider)
        .then((result) => {
            // ÄÄƒng nháº­p Google thÃ nh cÃ´ng
            const user = result.user;
            
            // Chuyá»ƒn hÆ°á»›ng Ä‘áº¿n trang quáº£n lÃ½ (input.html)
            window.location.href = 'input.html';
        })
        .catch((error) => {
            console.error("Lá»—i ÄÄƒng Nháº­p Google:", error.code, error.message);
            
            let msg = "ÄÄƒng nháº­p Google tháº¥t báº¡i.";
            if (error.code === 'auth/popup-closed-by-user') {
                 msg = "ÄÄƒng nháº­p bá»‹ há»§y bá»Ÿi ngÆ°á»i dÃ¹ng.";
            } else if (error.code === 'auth/cancelled-popup-request') {
                 msg = "ÄÃ£ cÃ³ má»™t yÃªu cáº§u Ä‘Äƒng nháº­p khÃ¡c Ä‘ang diá»…n ra.";
            }
            errorMessage.textContent = msg;
        });
}
</script>

</body>
</html>
